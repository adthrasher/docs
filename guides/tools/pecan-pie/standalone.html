

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Standalone DNAnexus cloud pipeline usage &mdash; St. Jude Cloud Documentation v1.0.0</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Frequently Asked Questions (FAQ)" href="faq.html" />
    <link rel="prev" title="Analysis of Results" href="results.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> St. Jude Cloud Documentation
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/data-request.html">Make a Data Request</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/fill-out-daa.html">Data Access Agreement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/command-line.html">Getting Started with the Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/upload-data.html">Uploading Data to St. Jude Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/download-data.html">Downloading Data from St. Jude Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/data-transfer-app.html">Data Transfer Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/embargo-dates.html">Embargo Dates</a></li>
</ul>
<p class="caption"><span class="caption-text">Tool Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">PeCan PIE</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#contents">Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="operation.html">Pipeline Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="results.html">Analysis of Results</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Standalone DNAnexus cloud pipeline usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#preamble">Preamble</a></li>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#permissions">Permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-methods">Access methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#workflow">Workflow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rapid-rnaseq/index.html">Rapid RNA-Seq Fusion Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chipseq/index.html">ChIP-Seq Peak Calling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../warden/index.html">WARDEN Differential Expression Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../neoepitope/index.html">HLA Typing and Neoepitope Prediction</a></li>
</ul>
<p class="caption"><span class="caption-text">Visualization Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../visualizations/bigwig.html">ProteinPaint BigWig Viewer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../visualizations/fusion-viewer.html">ProteinPaint Fusion Viewer</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../internal/index.html">St. Jude Internal Employee Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">St. Jude Cloud Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">PeCan PIE</a> &raquo;</li>
        
      <li>Standalone DNAnexus cloud pipeline usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="standalone-dnanexus-cloud-pipeline-usage">
<span id="pecan-pie-overview"></span><h1>Standalone DNAnexus cloud pipeline usage<a class="headerlink" href="#standalone-dnanexus-cloud-pipeline-usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="preamble">
<h2>Preamble<a class="headerlink" href="#preamble" title="Permalink to this headline">¶</a></h2>
<p>This section is intended only for users who want to invoke PeCanPIE’s underlying analysis pipelines independently on the <a class="reference external" href="https://www.dnanexus.com">DNAnexus</a> platform.  If you just want to use the PeCanPIE website you can safely ignore this section of the documentation.</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document assumes familiarity with the DNAnexus platform; DNAnexus’ <a class="reference external" href="https://wiki.dnanexus.com/Command-Line-Client/Quickstart">Quickstart guide</a> is a great place to start if you new to it.</p>
<p>Two DNAnexus cloud application pipelines were created during the development of PeCanPIE:</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="12%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">dnanexus app name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VEP+</td>
<td>app-stjude_vep_plus</td>
<td>a cloud installation of <a class="reference external" href="https://www.ensembl.org/vep">VEP</a> with improved logic for splice variant calls.  Converts an input VCF of variants to annotated, tab-delimited format.</td>
</tr>
<tr class="row-odd"><td>Medal Ceremony</td>
<td>app-stjude_medal_ceremony</td>
<td>additional annotation and automated variant classification.  Requires a special input format which is produced by VEP+.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="permissions">
<h2>Permissions<a class="headerlink" href="#permissions" title="Permalink to this headline">¶</a></h2>
<p>In order to run the cloud pipelines independently, your DNAnexus account needs to be granted permissions to access them.  After your initial login to PeCanPIE, these permissions will be granted automatically.  A single login is required even if you just want to use the standalone pipelines rather than the PeCanPIE portal.  <a class="reference external" href="https://stjude.cloud/contact">Contact us</a> if you encounter problems accessing the pipelines.</p>
</div>
<div class="section" id="access-methods">
<h2>Access methods<a class="headerlink" href="#access-methods" title="Permalink to this headline">¶</a></h2>
<p>There are two methods of running pipelines on DNAnexus:</p>
<ol class="arabic simple">
<li>GUI.  DNAnexus provides a standardized graphical user interface for configurating, launching, and monitoring jobs on the cloud.  Our pipelines can be run like any other DNAnexus pipeline.</li>
<li>command line.  Jobs may also be invoked via the “dx” command line client.  Command-line use allows submitting cloud jobs without interacting with a GUI, and so supports scripting and easier integration with local workflows.</li>
</ol>
<p>The following examples demonstrate command-line usage.</p>
</div>
<div class="section" id="workflow">
<h2>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<p>All input files must be uploaded onto the DNAnexus platform.  When specifying files for input you can use either the DNAnexus fie IDs (e.g. “file-FBgvp680gz1bGQ5p8yZKz69g”), or the filenames if they are unique.</p>
<div class="section" id="step-1-vep">
<h3>step 1: VEP+<a class="headerlink" href="#step-1-vep" title="Permalink to this headline">¶</a></h3>
<p>example dx command line for VEP+:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dx</span> <span class="n">run</span> <span class="n">app</span><span class="o">-</span><span class="n">stjude_vep_plus</span> <span class="o">-</span><span class="n">iinput_file</span><span class="o">=</span><span class="n">my_vcf</span><span class="o">.</span><span class="n">vcf</span> <span class="o">-</span><span class="n">igenome_string</span><span class="o">=</span><span class="n">GRCh37</span><span class="o">-</span><span class="n">lite</span> <span class="o">-</span><span class="n">igermline_reviewable_only</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>Notes:</p>
<blockquote>
<div><ul class="simple">
<li>“genome_string” must be either GRCh37-lite or GRCh38.  If GRCh38 is specified, variants will be lifted over to GRCh37 in output, i.e. the output will always be GRCh37 (Medal Ceremony is still currently 37 only).</li>
<li>The input VCF specified by “input_file” may be either uncompressed, or compressed with bgzip <strong>only</strong> (htslib/tabix packages).</li>
<li>The “germline_reviewable_only” parameter is optional, but strongly recommended.  If specified, only variants in disease-gene related intervals will be annotated, which is appropriate for Medal Ceremony.  If this option is not specified all variants will be annotated, which depending on the size of your VCF might take a lot longer, and many of the resulting variants won’t be usable by Medal Ceremony.  If you want to do this anyway and have a large number of variants, consider submitting your job to an instance with more CPU cores (e.g. mem1_ssd1_x16 or mem1_ssd1_x32) as the code will take advantage of the additional cores.  If you are using a custom gene list (below) that takes precedence and this parameter is not needed.</li>
<li>The optional parameter “custom_genes_file” specifies a plain text file of HUGO gene symbols to analyze (whitespace separated, or one per line).  If specified, analysis will be restricted to these genes only.</li>
<li>This pipeline produces two output files, “output_file” contains annotations for all variants, while “medal_prep_output_file” is the specially-filtered and formatted file required as input to Medal Ceremony below.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="step-2-medal-ceremony">
<h3>step 2: Medal Ceremony<a class="headerlink" href="#step-2-medal-ceremony" title="Permalink to this headline">¶</a></h3>
<p>example dx command line for Medal Ceremony:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dx</span> <span class="n">run</span> <span class="n">app</span><span class="o">-</span><span class="n">stjude_medal_ceremony</span> <span class="o">-</span><span class="n">iinfile</span><span class="o">=</span><span class="n">medal_prep_output_file</span>
</pre></div>
</div>
<p>Notes:</p>
<blockquote>
<div><ul class="simple">
<li>the optional parameter “custom_genes_file” operates in the same way as in the VEP+ pipeline above.  For custom gene lists to work properly this parameter must be specified when running both the VEP+ and Medal Ceremony pipelines.</li>
<li>the optional parameter “max_population_frequency” may be specified, a fractional value representing the maximum population frequency allowed for a variant in the ExAC (ex-TCGA) database to receive a medal.  The default is 0.001, a.k.a. “.1%”.</li>
</ul>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faq.html" class="btn btn-neutral float-right" title="Frequently Asked Questions (FAQ)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="results.html" class="btn btn-neutral" title="Analysis of Results" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, 2017, 2018 St. Jude Developers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'latest',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>